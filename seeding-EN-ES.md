# Base de datos: Semillas : Database: Seeding

- [Introduction](#introduction)
- [Writing Seeders](#writing-seeders)
    - [Using Model Factories](#using-model-factories)
    - [Calling Additional Seeders](#calling-additional-seeders)
- [Running Seeders](#running-seeders)

<a name="introduction"></a>
## Introducción : Introduction

Laravel incluye un método simple para sembrar su base de datos con datos de prueba utilizando clases semilla. Todas las clases de semillas se almacenan en el directorio `database/seeds`. Las clases de semillas pueden tener cualquier nombre que desee, pero probablemente deberían seguir alguna convención sensata, como `UsersTableSeeder`, etc. Por defecto, se define una clase `DatabaseSeeder` para usted. Desde esta clase, puede usar el método `call` para ejecutar otras clases semilla, lo que le permite controlar la orden de inicialización.
> > Laravel includes a simple method of seeding your database with test data using seed classes. All seed classes are stored in the `database/seeds` directory. Seed classes may have any name you wish, but probably should follow some sensible convention, such as `UsersTableSeeder`, etc. By default, a `DatabaseSeeder` class is defined for you. From this class, you may use the `call` method to run other seed classes, allowing you to control the seeding order.

<a name="writing-seeders"></a>
## Escribiendo Semillas : Writing Seeders

Para generar semillas, ejecute el comando `make:seeder` [Artisan](/docs/{{version}}/artisan). Todas las semillas generadas por el framework se colocarán en el directorio `database/seeds`:
> > To generate a seeder, execute the `make:seeder` [Artisan command](/docs/{{version}}/artisan). All seeders generated by the framework will be placed in the `database/seeds` directory:

    php artisan make:seeder UsersTableSeeder

Una clase de seeder solo contiene un método por defecto: `run`. Este método se invoca cuando se ejecuta el comando [Artisan](/docs/{{version}}/artisan) `db:seed`. Dentro del método `run`, puede insertar datos en su base de datos como lo desee. Puede usar [query builder](/docs/{{version}}/queries) para insertar datos manualmente o puede usar [Eloquent model manufacturers](/docs/{{version}}/database-testing#writing-factories).
> > A seeder class only contains one method by default: `run`. This method is called when the `db:seed` [Artisan command](/docs/{{version}}/artisan) is executed. Within the `run` method, you may insert data into your database however you wish. You may use the [query builder](/docs/{{version}}/queries) to manually insert data or you may use [Eloquent model factories](/docs/{{version}}/database-testing#writing-factories).

> {tip} [Protección de asignación masiva](/docs/{{version}}/eloquent#mass-assignment) se deshabilita automáticamente durante la creación de la base de datos.
> > > {tip} [Mass assignment protection](/docs/{{version}}/eloquent#mass-assignment) is automatically disabled during database seeding.

Como ejemplo, modifiquemos la clase `DatabaseSeeder` predeterminada y agreguemos una instrucción de inserción de base de datos al método `run`:
> > As an example, let's modify the default `DatabaseSeeder` class and add a database insert statement to the `run` method:

    <?php

    use Illuminate\Database\Seeder;
    use Illuminate\Support\Facades\DB;

    class DatabaseSeeder extends Seeder
    {
        /**
         * Run the database seeds.
         *
         * @return void
         */
        public function run()
        {
            DB::table('users')->insert([
                'name' => str_random(10),
                'email' => str_random(10).'@gmail.com',
                'password' => bcrypt('secret'),
            ]);
        }
    }

> {tip} Puede escribir-insinuar cualquier dependencia que necesite dentro de la firma del método `run`. Se resolverán automáticamente a través del [contenedor de servicios](/docs/{{version}}/container) de Laravel.
> > > {tip} You may type-hint any dependencies you need within the `run` method's signature. They will automatically be resolved via the Laravel [service container](/docs/{{version}}/container).

<a name="using-model-factories"></a>
### Usando modelo Fábricas : Using Model Factories

Por supuesto, especificar manualmente los atributos para cada semilla de modelo es engorroso. En su lugar, puede usar [fábricas modelo](/docs/{{version}}/database-testing#writing-factories) para generar grandes cantidades de registros en las bases de datos. En primer lugar, revise la [documentación de la fábrica modelo](/docs/{{version}}/database-testing#writing-factories) para aprender a definir sus fábricas. Una vez que haya definido sus fábricas, puede usar la función helper `factory` para insertar registros en su base de datos.
> > Of course, manually specifying the attributes for each model seed is cumbersome. Instead, you can use [model factories](/docs/{{version}}/database-testing#writing-factories) to conveniently generate large amounts of database records. First, review the [model factory documentation](/docs/{{version}}/database-testing#writing-factories) to learn how to define your factories. Once you have defined your factories, you may use the `factory` helper function to insert records into your database.

Por ejemplo, creemos 50 usuarios y adjuntemos una relación a cada usuario:
> > For example, let's create 50 users and attach a relationship to each user:

    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        factory(App\User::class, 50)->create()->each(function ($u) {
            $u->posts()->save(factory(App\Post::class)->make());
        });
    }

<a name="calling-additional-seeders"></a>
### Llamando a semillas adicionales : Calling Additional Seeders

Dentro de la clase `DatabaseSeeder`, puede usar el método `call` para ejecutar clases semilla adicionales. El uso del método `call` le permite dividir la creación de bases de datos en varios archivos para que ninguna clase de semilla sea abrumadoramente grande. Pase el nombre de la clase semilla que desea ejecutar:
> > Within the `DatabaseSeeder` class, you may use the `call` method to execute additional seed classes. Using the `call` method allows you to break up your database seeding into multiple files so that no single seeder class becomes overwhelmingly large. Pass the name of the seeder class you wish to run:

    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        $this->call([
            UsersTableSeeder::class,
            PostsTableSeeder::class,
            CommentsTableSeeder::class,
        ]);
    }

<a name="running-seeders"></a>
## Ejecutando semillas : Running Seeders

Una vez que haya escrito su semilla, es posible que necesite regenerar el autocargador de Composer utilizando el comando `dump-autoload`:
> > Once you have written your seeder, you may need to regenerate Composer's autoloader using the `dump-autoload` command:

    composer dump-autoload

Ahora puede usar el comando Artisan `db:seed` para sembrar su base de datos. Por defecto, el comando `db:seed` ejecuta la clase `DatabaseSeeder`, que puede usarse para llamar a otras clases semilla. Sin embargo, puede usar la opción `--class` para especificar una clase semilla específica para ejecutarse individualmente:
> > Now you may use the `db:seed` Artisan command to seed your database. By default, the `db:seed` command runs the `DatabaseSeeder` class, which may be used to call other seed classes. However, you may use the `--class` option to specify a specific seeder class to run individually:

    php artisan db:seed

    php artisan db:seed --class=UsersTableSeeder

También puede sembrar su base de datos utilizando el comando `migrate:refresh`, que también revertirá y volverá a ejecutar todas sus migraciones. Este comando es útil para reconstruir completamente su base de datos:
> > You may also seed your database using the `migrate:refresh` command, which will also rollback and re-run all of your migrations. This command is useful for completely re-building your database:

    php artisan migrate:refresh --seed
