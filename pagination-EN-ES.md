# Base de datos: paginación : Database: Pagination

- [Introduction](#introduction)
- [Basic Usage](#basic-usage)
    - [Paginating Query Builder Results](#paginating-query-builder-results)
    - [Paginating Eloquent Results](#paginating-eloquent-results)
    - [Manually Creating A Paginator](#manually-creating-a-paginator)
- [Displaying Pagination Results](#displaying-pagination-results)
    - [Converting Results To JSON](#converting-results-to-json)
- [Customizing The Pagination View](#customizing-the-pagination-view)
- [Paginator Instance Methods](#paginator-instance-methods)

<a name="introduction"></a>
## Introducción : Introduction

En otros frameworks, la paginación puede ser muy dolorosa. El paginador de Laravel está integrado con [generador de consultas](/docs/{{version}}/queries) y [Eloquent ORM](/docs/{{version}}/eloquent) y proporciona una paginación comoda y fácil de usar resultados de la base de datos fuera de la caja. El HTML generado por el paginador es compatible con el [framework Bootstrap CSS](https://getbootstrap.com/).
> > In other frameworks, pagination can be very painful. Laravel's paginator is integrated with the [query builder](/docs/{{version}}/queries) and [Eloquent ORM](/docs/{{version}}/eloquent) and provides convenient, easy-to-use pagination of database results out of the box. The HTML generated by the paginator is compatible with the [Bootstrap CSS framework](https://getbootstrap.com/).

<a name="basic-usage"></a>
## Uso básico : Basic Usage

<a name="paginating-query-builder-results"></a>
### Paginating Query Builder Results

Hay varias formas de paginar elementos. El más simple es usar el método `paginate` en [query builder](/docs/{{version}}/queries) o una [consulta Eloquent](/docs/{{version}}/eloquent). El método `paginate` se ocupa automáticamente de establecer el límite y el desplazamiento adecuados en función de la página actual que esté viendo el usuario. Por defecto, la página actual se detecta por el valor del argumento de cadena de consulta `page` en la solicitud HTTP. Por supuesto, este valor es detectado automáticamente por Laravel, y también se inserta automáticamente en los enlaces generados por el paginador.
> > There are several ways to paginate items. The simplest is by using the `paginate` method on the [query builder](/docs/{{version}}/queries) or an [Eloquent query](/docs/{{version}}/eloquent). The `paginate` method automatically takes care of setting the proper limit and offset based on the current page being viewed by the user. By default, the current page is detected by the value of the `page` query string argument on the HTTP request. Of course, this value is automatically detected by Laravel, and is also automatically inserted into links generated by the paginator.

En este ejemplo, el único argumento que se pasa al método `paginate` es la cantidad de elementos que desea mostrar "por página". En este caso, especifiquemos que nos gustaría mostrar `15` elementos por página:
> > In this example, the only argument passed to the `paginate` method is the number of items you would like displayed "per page". In this case, let's specify that we would like to display `15` items per page:

    <?php

    namespace App\Http\Controllers;

    use Illuminate\Support\Facades\DB;
    use App\Http\Controllers\Controller;

    class UserController extends Controller
    {
        /**
         * Show all of the users for the application.
         *
         * @return Response
         */
        public function index()
        {
            $users = DB::table('users')->paginate(15);

            return view('user.index', ['users' => $users]);
        }
    }

> {note} Actualmente, Laravel no puede ejecutar de manera eficiente las operaciones de paginación que usan una declaración `groupBy`. Si necesita utilizar un `groupBy` con un conjunto de resultados paginado, se recomienda consultar la base de datos y crear un paginador manualmente.
> > > {note} Currently, pagination operations that use a `groupBy` statement cannot be executed efficiently by Laravel. If you need to use a `groupBy` with a paginated result set, it is recommended that you query the database and create a paginator manually.

#### "Paginación simple" : "Simple Pagination"

Si solo necesita mostrar enlaces simples "Siguiente" y "Anterior" en su vista de paginación, puede usar el método `simplePaginate` para realizar una consulta más eficiente. Esto es muy útil para grandes conjuntos de datos cuando no necesita mostrar un enlace para cada número de página al representar su vista:
> > If you only need to display simple "Next" and "Previous" links in your pagination view, you may use the `simplePaginate` method to perform a more efficient query. This is very useful for large datasets when you do not need to display a link for each page number when rendering your view:

    $users = DB::table('users')->simplePaginate(15);

<a name="paginating-eloquent-results"></a>
### Paginating Eloquent Results

También puede paginar consultas [Eloquent](/docs/{{version}}/eloquent). En este ejemplo, vamos a paginar el modelo `User` con `15` elementos por página. Como puede ver, la sintaxis es casi idéntica a la paginación de los resultados del generador de consultas:
> > You may also paginate [Eloquent](/docs/{{version}}/eloquent) queries. In this example, we will paginate the `User` model with `15` items per page. As you can see, the syntax is nearly identical to paginating query builder results:

    $users = App\User::paginate(15);

Por supuesto, puede llamar a `paginate` después de establecer otras restricciones en la consulta, como las cláusulas `where`:
> > Of course, you may call `paginate` after setting other constraints on the query, such as `where` clauses:

    $users = User::where('votes', '>', 100)->paginate(15);

También puede usar el método `simplePaginate` al paginar modelos Eloquent:
> > You may also use the `simplePaginate` method when paginating Eloquent models:

    $users = User::where('votes', '>', 100)->simplePaginate(15);

<a name="manually-creating-a-paginator"></a>
### Creación manual de un paginador : Manually Creating A Paginator

En ocasiones, es posible que desee crear una instancia de paginación de forma manual, pasando una serie de elementos. Puede hacerlo creando una instancia `Illuminate\Pagination\Paginator` o `Illuminate\Pagination\LengthAwarePaginator`, según sus necesidades.
> > Sometimes you may wish to create a pagination instance manually, passing it an array of items. You may do so by creating either an `Illuminate\Pagination\Paginator` or `Illuminate\Pagination\LengthAwarePaginator` instance, depending on your needs.

La clase `Paginator` no necesita saber la cantidad total de elementos en el conjunto de resultados; sin embargo, debido a esto, la clase no tiene métodos para recuperar el índice de la última página. El `LengthAwarePaginator` acepta casi los mismos argumentos que el `Paginator`; sin embargo, sí requiere un recuento de la cantidad total de elementos en el conjunto de resultados.
> > The `Paginator` class does not need to know the total number of items in the result set; however, because of this, the class does not have methods for retrieving the index of the last page. The `LengthAwarePaginator` accepts almost the same arguments as the `Paginator`; however, it does require a count of the total number of items in the result set.

En otras palabras, el `Paginator` corresponde al método `simplePaginate` en el generador de consultas y Eloquent, mientras que `LengthAwarePaginator` corresponde al método `paginate`.
> > In other words, the `Paginator` corresponds to the `simplePaginate` method on the query builder and Eloquent, while the `LengthAwarePaginator` corresponds to the `paginate` method.

> {note} Cuando crea manualmente una instancia de paginador, debe "cortar" manualmente el array de resultados que pasa al paginador. Si no está seguro de cómo hacerlo, consulte la función de PHP [array_slice](https://secure.php.net/manual/en/function.array-slice.php).
> > > {note} When manually creating a paginator instance, you should manually "slice" the array of results you pass to the paginator. If you're unsure how to do this, check out the [array_slice](https://secure.php.net/manual/en/function.array-slice.php) PHP function.

<a name="displaying-pagination-results"></a>
## Visualización de resultados de paginación : Displaying Pagination Results

Cuando llame al método `paginate`, recibirá una instancia de `Illuminate\Pagination\LengthAwarePaginator`. Cuando llame al método `simplePaginate`, recibirá una instancia de `Illuminate\Pagination\Paginator`. Estos objetos proporcionan varios métodos que describen el conjunto de resultados. Además de estos métodos de ayuda, las instancias del paginador son iteradores y pueden formarse como un array. Entonces, una vez que hayas recuperado los resultados, puedes mostrar los resultados y renderizar los enlaces de la página usando [Blade](/docs/{{version}}/blade):
> > When calling the `paginate` method, you will receive an instance of `Illuminate\Pagination\LengthAwarePaginator`. When calling the `simplePaginate` method, you will receive an instance of `Illuminate\Pagination\Paginator`. These objects provide several methods that describe the result set. In addition to these helpers methods, the paginator instances are iterators and may be looped as an array. So, once you have retrieved the results, you may display the results and render the page links using [Blade](/docs/{{version}}/blade):

    <div class="container">
        @foreach ($users as $user)
            {{ $user->name }}
        @endforeach
    </div>

    {{ $users->links() }}

El método `links` representará los enlaces al resto de las páginas en el conjunto de resultados. Cada uno de estos enlaces ya contendrá la variable de cadena de consulta `page` adecuada. Recuerde, el HTML generado por el método `links` es compatible con el [framework Bootstrap CSS](https://getbootstrap.com).
> > The `links` method will render the links to the rest of the pages in the result set. Each of these links will already contain the proper `page` query string variable. Remember, the HTML generated by the `links` method is compatible with the [Bootstrap CSS framework](https://getbootstrap.com).

#### Customizing The Paginator URI

El método `withPath` le permite personalizar la URI utilizada por el paginador al generar enlaces. Por ejemplo, si desea que el paginador genere enlaces como `http://example.com/custom/url? Page = N`, debe pasar `custom/url` al método `withPath`:
> > The `withPath` method allows you to customize the URI used by the paginator when generating links. For example, if you want the paginator to generate links like `http://example.com/custom/url?page=N`, you should pass `custom/url` to the `withPath` method:

    Route::get('users', function () {
        $users = App\User::paginate(15);

        $users->withPath('custom/url');

        //
    });

#### Agregar a enlaces de paginación : Appending To Pagination Links

Puede agregar a la cadena de búsqueda de enlaces de paginación usando el método `appends`. Por ejemplo, para agregar `sort=votes` a cada enlace de paginación, debe hacer la siguiente llamada a `appends`:
> > You may append to the query string of pagination links using the `appends` method. For example, to append `sort=votes` to each pagination link, you should make the following call to `appends`:

    {{ $users->appends(['sort' => 'votes'])->links() }}

Si desea agregar un "fragmento hash" a las URL del paginador, puede usar el método `fragment`. Por ejemplo, para agregar `#foo` al final de cada enlace de paginación, realice la siguiente llamada al método `fragment`:
> > If you wish to append a "hash fragment" to the paginator's URLs, you may use the `fragment` method. For example, to append `#foo` to the end of each pagination link, make the following call to the `fragment` method:

    {{ $users->fragment('foo')->links() }}

#### Adjusting The Pagination Link Window

Puede controlar cuántos enlaces adicionales se muestran a cada lado de la "ventana" de la URL del paginador. Por defecto, se muestran tres enlaces a cada lado de los enlaces del paginador principal. Sin embargo, puedes controlar este número usando el método `onEachSide`:
> > You may control how many additional links are displayed on each side of the paginator's URL "window". By default, three links are displayed on each side of the primary paginator links. However, you may control this number using the `onEachSide` method:

    {{ $users->onEachSide(5)->links() }}

<a name="converting-results-to-json"></a>
### Conversión de resultados a JSON : Converting Results To JSON

Las clases de resultados del paginador Laravel implementan el contrato de la interfaz `Illuminate\Contracts\Support\Jsonable` y exponen el método `toJson`, por lo que es muy fácil convertir los resultados de la paginación a JSON. También puede convertir una instancia de paginador en JSON devolviéndola desde una ruta o acción de controlador:
> > The Laravel paginator result classes implement the `Illuminate\Contracts\Support\Jsonable` Interface contract and expose the `toJson` method, so it's very easy to convert your pagination results to JSON. You may also convert a paginator instance to JSON by returning it from a route or controller action:

    Route::get('users', function () {
        return App\User::paginate();
    });

El JSON del paginador incluirá metainformación como `total`, `current_page`, `last_page`, y más. Los objetos de resultado reales estarán disponibles a través de la tecla `data` en el array JSON. Aquí hay un ejemplo del JSON creado al devolver una instancia de paginador de una ruta:
> > The JSON from the paginator will include meta information such as `total`, `current_page`, `last_page`, and more. The actual result objects will be available via the `data` key in the JSON array. Here is an example of the JSON created by returning a paginator instance from a route:

    {
       "total": 50,
       "per_page": 15,
       "current_page": 1,
       "last_page": 4,
       "first_page_url": "http://laravel.app?page=1",
       "last_page_url": "http://laravel.app?page=4",
       "next_page_url": "http://laravel.app?page=2",
       "prev_page_url": null,
       "path": "http://laravel.app",
       "from": 1,
       "to": 15,
       "data":[
            {
                // Result Object
            },
            {
                // Result Object
            }
       ]
    }

<a name="customizing-the-pagination-view"></a>
## Personalización de la vista de paginación : Customizing The Pagination View

Por defecto, las vistas representadas para mostrar los enlaces de paginación son compatibles con el framework CSS de Bootstrap. Sin embargo, si no está utilizando Bootstrap, puede definir sus propias vistas para representar estos enlaces. Al llamar al método `links` en una instancia de paginador, pase el nombre de vista como primer argumento al método:
> > By default, the views rendered to display the pagination links are compatible with the Bootstrap CSS framework. However, if you are not using Bootstrap, you are free to define your own views to render these links. When calling the `links` method on a paginator instance, pass the view name as the first argument to the method:

    {{ $paginator->links('view.name') }}

    // Passing data to the view...
    {{ $paginator->links('view.name', ['foo' => 'bar']) }}

Sin embargo, la manera más fácil de personalizar las vistas de paginación es exportándolas a su directorio `resources/views/vendor` utilizando el comando `vendor:publish`:
> > However, the easiest way to customize the pagination views is by exporting them to your `resources/views/vendor` directory using the `vendor:publish` command:

    php artisan vendor:publish --tag=laravel-pagination

Este comando colocará las vistas en el directorio `resources/views/vendor/pagination`. El archivo `bootstrap-4.blade.php` dentro de este directorio corresponde a la vista de paginación predeterminada. Puede editar este archivo para modificar el HTML de paginación.
> > This command will place the views in the `resources/views/vendor/pagination` directory. The `bootstrap-4.blade.php` file within this directory corresponds to the default pagination view. You may edit this file to modify the pagination HTML.

Si desea designar un archivo diferente como vista de paginación predeterminada, puede usar los métodos `defaultView` y `defaultSimpleView` del paginador dentro de su `AppServiceProvider`:
> > If you would like to designate a different file as the default pagination view, you may use the paginator's `defaultView` and `defaultSimpleView` methods within your `AppServiceProvider`:

    use Illuminate\Pagination\Paginator;

    public function boot()
    {
        Paginator::defaultView('pagination::view');

        Paginator::defaultSimpleView('pagination::view');
    }

<a name="paginator-instance-methods"></a>
## Métodos de instancia de Paginator : Paginator Instance Methods

Cada instancia de paginador proporciona información de paginación adicional a través de los siguientes métodos:
> > Each paginator instance provides additional pagination information via the following methods:

- `$results->count()`
- `$results->currentPage()`
- `$results->firstItem()`
- `$results->hasMorePages()`
- `$results->lastItem()`
- `$results->lastPage() (Not available when using simplePaginate)`
- `$results->nextPageUrl()`
- `$results->perPage()`
- `$results->previousPageUrl()`
- `$results->total() (Not available when using simplePaginate)`
- `$results->url($page)`
